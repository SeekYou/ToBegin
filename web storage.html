<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>web留言本</title>
</head>
<body>
	<h1>web留言本</h1>
	<textarea name="" id="memo" cols="60" rows="10"></textarea><br/>
	<input type="button" value="追加" onclick="saveStorage('memo')">
	<input type="button" value="初始化" onclick="clearStorage('msg')">
	<hr>
	<p id="msg"></p>
	<script>
		function saveStorage(id){
			var data=document.getElementById(id).value;
			var time=new Date().getTime();
			localStorage.setItem(time,data);
			alert('数据已保存');
			loadStorage('msg');
		}
		function loadStorage(id){
			var result='<table border="1">';
			for(var i=0;i<localStorage.length;i++){
				var key=localStorage.key(i);
				var value=localStorage.getItem(key);
				var date=new Date();
				date.setTime(key);
				var dateStr=date.toGMTString();
				result+='<tr><td>'+value+'</td><td>'+dateStr+'</td></tr>';
			}
			result+="</table>";
			var target=document.getElementById(id);
			target.innerHTML=result;
		}
		function clearStorage(){
			localStorage.clear();
			alert('全部数据已清除');
			loadStorage('msg');
		}
	</script>
</body>
</html>